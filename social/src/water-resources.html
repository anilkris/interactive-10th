<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Water Resources of India</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: white;
            border-radius: 0.75rem;
            padding: 2rem;
            max-width: 90%;
            width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            z-index: 50;
        }
        .marker {
            position: absolute;
            border: 2px solid white;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .marker:hover {
            transform: scale(1.05);
        }
        .dam-marker, .river-marker {
             width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        .dam-marker {
            background-color: #3b82f6; /* Blue for dams */
        }
        .dam-marker:hover {
             background-color: #ef4444; /* Red on hover */
        }
        .river-marker {
            background-color: #10b981; /* Green for rivers */
        }
        .river-marker:hover {
            background-color: #f59e0b; /* Amber on hover */
        }
        .dam-mask {
            background-color: rgba(0, 0, 0, 1); /* Dark black mask */
            border: 1px dashed white;
            border-radius: 4px;
        }
         .dam-mask:hover {
            background-color: rgba(59, 130, 246, 0.6); /* Blue on hover */
        }
        .marker .tooltip {
            visibility: hidden;
            width: 120px;
            background-color: #1f2937;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 1;
            bottom: 150%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .marker:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        .quiz-option.correct {
            background-color: #10b981 !important;
            color: white;
            border-color: #059669;
        }
        .quiz-option.incorrect {
            background-color: #ef4444 !important;
            color: white;
            border-color: #dc2626;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-blue-600 text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <h1 class="text-3xl md:text-4xl font-bold">Water Resources: An Interactive Guide</h1>
            <p class="mt-2 text-lg">Exploring India's water landscape based on the NCERT chapter.</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="sticky top-0 bg-white/80 backdrop-blur-sm shadow-md z-30">
        <div class="container mx-auto px-6">
            <ul class="flex justify-center space-x-4 md:space-x-8 py-3 overflow-x-auto">
                <li><a href="#scarcity" class="text-gray-600 hover:text-blue-600 font-semibold whitespace-nowrap">Water Scarcity</a></li>
                <li><a href="#dams" class="text-gray-600 hover:text-blue-600 font-semibold whitespace-nowrap">Dam Explorer</a></li>
                <li><a href="#rivers" class="text-gray-600 hover:text-blue-600 font-semibold whitespace-nowrap">River Explorer</a></li>
                <li><a href="#advanced-dams" class="text-gray-600 hover:text-blue-600 font-semibold whitespace-nowrap">Advanced Dam Insights</a></li>
                <li><a href="#harvesting" class="text-gray-600 hover:text-blue-600 font-semibold whitespace-nowrap">Harvesting</a></li>
                <li><a href="#quiz" class="text-gray-600 hover:text-blue-600 font-semibold whitespace-nowrap">Quiz</a></li>
                <li><a href="#safety" class="text-gray-600 hover:text-blue-600 font-semibold whitespace-nowrap">Flood Safety</a></li>
            </ul>
        </div>
    </nav>

    <main class="container mx-auto px-6 py-12">

        <!-- Water Scarcity Section -->
        <section id="scarcity" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-blue-800">The Paradox of Water Scarcity</h2>
            <p class="text-center text-lg text-gray-600 mb-8 max-w-3xl mx-auto">While three-fourths of the Earth is covered with water, we still face scarcity. It's not just about availability, but also about management, quality, and access.</p>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="card p-6"><h3 class="text-xl font-bold mb-3 text-blue-700">Over-Exploitation</h3><p class="text-gray-600">A large and growing population's demand for water for domestic use and to produce more food leads to over-exploitation of resources like groundwater, causing water levels to fall.</p></div>
                <div class="card p-6"><h3 class="text-xl font-bold mb-3 text-blue-700">Industrialization & Urbanization</h3><p class="text-gray-600">Industries are heavy water users and require power, often from hydropower. Growing cities with dense populations and their own groundwater pumping further deplete fragile water resources.</p></div>
                <div class="card p-6"><h3 class="text-xl font-bold mb-3 text-blue-700">Poor Water Quality</h3><p class="text-gray-600">Even with ample water, scarcity can exist if it's polluted by domestic/industrial waste, chemicals, and pesticides. This makes the water hazardous for human use.</p></div>
            </div>
        </section>

        <!-- Dam Explorer Section -->
        <section id="dams" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-8 text-blue-800">Interactive Dam Explorer</h2>
            <p class="text-center text-lg text-gray-600 mb-8 max-w-3xl mx-auto">Multi-purpose river projects were hailed as the "temples of modern India," but they come with their own set of challenges. Click on the blue markers to learn more about major dams.</p>
            <div class="card p-4">
                <div id="map-container" class="relative w-full">
                    <img src="../resources/dams_in_india.jpg" alt="Map of Major Dams in India" class="w-full h-auto rounded-md" onerror="this.onerror=null;this.src='https://placehold.co/1024x768/e2e8f0/64748b?text=Map+Not+Available';">
                </div>
            </div>
        </section>

        <!-- River Explorer Section -->
        <section id="rivers" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-8 text-blue-800">Interactive River Explorer</h2>
            <p class="text-center text-lg text-gray-600 mb-8 max-w-3xl mx-auto">India's rivers are its lifelines, forming vast basins that support agriculture and civilization. Click on the green markers to learn about major river systems.</p>
            <div class="card p-4">
                <div id="river-map-container" class="relative w-full">
                    <img src="../resources/Dams-of-India-Map-Largest-Highest-and-Oldest-Reservoir-with-Rivers.webp" alt="Map of Major Rivers in India" class="w-full h-auto rounded-md" onerror="this.onerror=null;this.src='https://placehold.co/1024x768/e2e8f0/64748b?text=Map+Not+Available';">
                </div>
            </div>
        </section>

        <!-- Advanced Dam Insights Section -->
        <section id="advanced-dams" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-8 text-blue-800">Advanced Dam Insights</h2>
            <p class="text-center text-lg text-gray-600 mb-8 max-w-3xl mx-auto">This map shows more dams with their names masked. Click on the black overlays to reveal information about each dam.</p>
            <div class="card p-4">
                <div id="advanced-map-container" class="relative w-full">
                    <img src="../resources/India-Dams.png" alt="Detailed Map of Dams in India" class="w-full h-auto rounded-md" onerror="this.onerror=null;this.src='https://placehold.co/1024x768/e2e8f0/64748b?text=Map+Not+Available';">
                </div>
            </div>
        </section>

        <!-- Rainwater Harvesting Section -->
        <section id="harvesting" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-8 text-blue-800">Traditional Rainwater Harvesting</h2>
            <p class="text-center text-lg text-gray-600 mb-8 max-w-3xl mx-auto">As an alternative to large dams, ancient India had an extraordinary tradition of water harvesting, adapted to local ecological conditions.</p>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="card text-center p-6"><img src="https://placehold.co/400x300/3498db/ffffff?text=Tankas" alt="Illustration of Tankas" class="w-full h-40 object-cover rounded-md mb-4"><h3 class="text-xl font-bold text-blue-700">Tankas</h3><p class="text-gray-600 mt-2">Underground tanks in Rajasthan for storing rooftop rainwater, providing drinking water during dry seasons.</p></div>
                <div class="card text-center p-6"><img src="https://placehold.co/400x300/2ecc71/ffffff?text=Guls/Kuls" alt="Illustration of Guls or Kuls" class="w-full h-40 object-cover rounded-md mb-4"><h3 class="text-xl font-bold text-blue-700">Guls or Kuls</h3><p class="text-gray-600 mt-2">Diversion channels built in the Western Himalayas for irrigating agricultural fields using stream water.</p></div>
                <div class="card text-center p-6"><img src="https://placehold.co/400x300/f1c40f/ffffff?text=Khadins" alt="Illustration of Khadins" class="w-full h-40 object-cover rounded-md mb-4"><h3 class="text-xl font-bold text-blue-700">Khadins & Johads</h3><p class="text-gray-600 mt-2">Rain-fed storage structures in arid Rajasthan that allow water to moisten the soil for agriculture.</p></div>
                <div class="card text-center p-6"><img src="https://placehold.co/400x300/9b59b6/ffffff?text=Bamboo+Drip" alt="Illustration of Bamboo Drip Irrigation" class="w-full h-40 object-cover rounded-md mb-4"><h3 class="text-xl font-bold text-blue-700">Bamboo Drip Irrigation</h3><p class="text-gray-600 mt-2">A 200-year-old system in Meghalaya using bamboo pipes to tap and transport spring water for irrigation.</p></div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section id="quiz" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-8 text-blue-800">Test Your Knowledge</h2>
            <div class="card max-w-3xl mx-auto p-8">
                <div id="quiz-container"></div>
                <div id="quiz-result" class="hidden text-center"><h3 class="text-2xl font-bold">Quiz Complete!</h3><p id="result-text" class="text-lg mt-4"></p><button id="restart-quiz-btn" class="mt-6 bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition">Try Again</button></div>
            </div>
        </section>

        <!-- Flood Safety Section -->
        <section id="safety" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-8 text-blue-800">Flood Safety Precautions</h2>
            <div class="card bg-amber-100 border-l-4 border-amber-500 p-6">
                <h3 class="text-xl font-bold text-amber-800 mb-4">Be Prepared, Stay Safe</h3>
                <ul class="list-disc list-inside space-y-2 text-amber-900">
                    <li>Listen to radio/TV for the latest weather bulletins and flood warnings.</li>
                    <li>Prepare a family emergency kit (radio, torch, first aid, dry food, water).</li>
                    <li>Keep important documents, cash, and valuables in a safe, waterproof place.</li>
                    <li>Turn off power and gas connections before leaving your house if you need to evacuate.</li>
                    <li>Do not enter floodwaters; it can be dangerous. Stay away from power lines.</li>
                    <li>Use boiled and filtered drinking water to prevent water-borne diseases.</li>
                </ul>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-16"><div class="container mx-auto px-6 py-4 text-center"><p>&copy; 2024 Interactive Water Resources Guide. All rights reserved.</p><p class="text-sm text-gray-400 mt-1">An educational tool based on NCERT materials.</p></div></footer>

    <!-- Info Modal -->
    <div id="info-modal" class="modal-backdrop hidden">
        <div class="modal-content animate-fade-in-up">
            <div class="flex justify-between items-center mb-4"><h3 id="modal-title" class="text-2xl font-bold text-blue-800"></h3><button id="close-modal-btn" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button></div>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const damData = {
            'salal': { name: 'Salal Project', river: 'Chenab', info: 'Located in Jammu and Kashmir, this project is primarily for hydropower generation.' },
            'bhakra': { name: 'Bhakra Nangal', river: 'Sutlej', info: 'One of India\'s largest multi-purpose projects, used for both hydel power and irrigation in Punjab, Haryana, and Rajasthan.' },
            'tehri': { name: 'Tehri Dam', river: 'Bhagirathi', info: 'One of the tallest dams in the world, located in Uttarakhand. It provides irrigation, drinking water, and generates 1,000 MW of hydroelectricity.' },
            'rana': { name: 'Rana Pratap Sagar', river: 'Chambal', info: 'Part of a series of dams on the Chambal River, this dam in Rajasthan is crucial for hydropower and irrigation.' },
            'sardar': { name: 'Sardar Sarovar', river: 'Narmada', info: 'One of India\'s largest water resource projects, benefiting Gujarat, MP, Maharashtra, and Rajasthan. It aims to supply water to drought-prone areas but has also been controversial due to social and environmental impacts.' },
            'hirakud': { name: 'Hirakud Dam', river: 'Mahanadi', info: 'One of the longest dams in the world, located in Odisha. It integrates water conservation with flood control and is vital for irrigation and power.' },
            'nagarjuna': { name: 'Nagarjuna Sagar', river: 'Krishna', info: 'A massive masonry dam in Andhra Pradesh/Telangana, crucial for irrigation in the region and also for power generation.' },
            'tungabhadra': { name: 'Tungabhadra Dam', river: 'Tungabhadra', info: 'A major multi-purpose dam in Karnataka, providing irrigation, electricity, and flood control.' },
            'koyna': { name: 'Koyna Dam', river: 'Koyna', info: 'A large rubble-concrete dam in Maharashtra, it is one of the largest hydroelectric power plants in India.' },
            'mettur': { name: 'Mettur Dam', river: 'Kaveri', info: 'Located in Tamil Nadu, it is one of the largest dams in India and crucial for irrigation and hydropower for the state.' },
            'indira_sagar': { name: 'Indira Sagar Dam', river: 'Narmada', info: 'A key multi-purpose dam on the Narmada river in Madhya Pradesh, providing significant hydropower and irrigation benefits.' },
            'maithon': { name: 'Maithon Dam', river: 'Barakar', info: 'Located in Jharkhand, this dam was specifically designed for flood control and generates a significant amount of electric power.' },
            'panchet': { name: 'Panchet Dam', river: 'Damodar', info: 'A dam across the Damodar River in Jharkhand, it is a part of the Damodar Valley Corporation and helps in flood control and irrigation.' },
            'rihand': { name: 'Rihand Dam', river: 'Rihand', info: 'A concrete gravity dam in Uttar Pradesh, its reservoir is called Govind Ballabh Pant Sagar and is India\'s largest artificial lake by volume.' }
        };

        const damPositions = { // top, left percentages based on the dam map
            'salal': { top: '18%', left: '33%' }, 
            'bhakra': { top: '24%', left: '36%' }, 
            'tehri': { top: '26%', left: '42%' }, 
            'rana': { top: '40%', left: '34%' }, 
            'sardar': { top: '52%', left: '30%' }, 
            'hirakud': { top: '52%', left: '58%' }, 
            'nagarjuna': { top: '66%', left: '43%' }, 
            'tungabhadra': { top: '72%', left: '36%' }, 
            'koyna': { top: '65%', left: '31%' }, 
            'mettur': { top: '80%', left: '40%' }, 
            'indira_sagar': { top: '47%', left: '44%' }, 
            'maithon': { top: '40%', left: '67%' }, 
            'panchet': { top: '41%', left: '65%' }, 
            'rihand': { top: '44%', left: '59%' }
        };

        const riverData = {
            'ganga': { name: 'Ganga River', info: 'The most sacred river to Hindus, originating in the Himalayas. It flows through the Gangetic Plain of North India and is crucial for agriculture and millions of people.' }, 'indus': { name: 'Indus River', info: 'A major south-flowing river in South Asia. Originating in the Tibetan Plateau, it flows through Ladakh and Pakistan before emptying into the Arabian Sea.' }, 'brahmaputra': { name: 'Brahmaputra River', info: 'A trans-boundary river flowing through Tibet, India, and Bangladesh. It is known for its catastrophic flooding during the monsoon season.' }, 'narmada': { name: 'Narmada River', info: 'Located in central India, it is a major river of peninsular India that flows westwards. It is considered one of the holiest rivers.' }, 'godavari': { name: 'Godavari River', info: 'India\'s second-longest river after the Ganga. It originates in Maharashtra and flows east across the Deccan Plateau.' }, 'krishna': { name: 'Krishna River', info: 'One of the major rivers of the Deccan, flowing through Maharashtra, Karnataka, Telangana, and Andhra Pradesh.' }, 'mahanadi': { name: 'Mahanadi River', info: 'A major river in East Central India, it flows through Chhattisgarh and Odisha. The Hirakud Dam is built on this river.' }
        };

        const riverPositions = { // top, left percentages based on the river map
            'ganga': { top: '43.5%', left: '45%' }, 
            'indus': { top: '19%', left: '34%' }, 
            'brahmaputra': { top: '44%', left: '80%' }, 
            'narmada': { top: '54.5%', left: '33%' }, 
            'godavari': { top: '67%', left: '44.5%' }, 
            'krishna': { top: '70%', left: '42%' }, 
            'mahanadi': { top: '60%', left: '62%' }
        };
        
        const advancedDamData = {
            'baglihar': { name: 'Baglihar Dam', river: 'Chenab', info: 'Located in Jammu & Kashmir, it is a run-of-the-river power project.'},
            'chamera': { name: 'Chamera Dam', river: 'Ravi', info: 'Located in Himachal Pradesh, this dam is a key source of hydroelectricity in the region.'},
            'tehri_adv': { name: 'Tehri Dam', river: 'Bhagirathi', info: 'One of the tallest dams in the world, located in Uttarakhand. It provides irrigation, drinking water, and generates 1,000 MW of hydroelectricity.' },
            'sardar_sarovar_adv': { name: 'Sardar Sarovar Dam', river: 'Narmada', info: 'One of India\'s largest water resource projects, benefiting Gujarat, MP, Maharashtra, and Rajasthan.' },
            'ukai': { name: 'Ukai Dam', river: 'Tapti', info: 'Located in Gujarat, this dam is the second largest reservoir in the state after the Sardar Sarovar.'},
            'koyna_adv': { name: 'Koyna Dam', river: 'Koyna', info: 'A large rubble-concrete dam in Maharashtra, it is one of the largest hydroelectric power plants in India.' },
            'srisailam': { name: 'Srisailam Dam', river: 'Krishna', info: 'Located in Andhra Pradesh, it is the 2nd largest capacity hydroelectric project in the country.'},
            'nagarjuna_sagar_adv': { name: 'Nagarjuna Sagar Dam', river: 'Krishna', info: 'A massive masonry dam in Andhra Pradesh/Telangana, crucial for irrigation in the region and also for power generation.' },
            'hirakud_adv': { name: 'Hirakud Dam', river: 'Mahanadi', info: 'One of the longest dams in the world, located in Odisha. It integrates water conservation with flood control and is vital for irrigation and power.' },
            'maithon_adv': { name: 'Maithon Dam', river: 'Barakar', info: 'Located in Jharkhand, this dam was specifically designed for flood control and generates a significant amount of electric power.' },
            'rihand_adv': { name: 'Rihand Dam', river: 'Rihand', info: 'A concrete gravity dam in Uttar Pradesh, its reservoir is called Govind Ballabh Pant Sagar and is India\'s largest artificial lake by volume.' },
            'idukki': { name: 'Idukki Dam', river: 'Periyar', info: 'Located in Kerala, it is a double curvature arch dam and one of the highest arch dams in Asia.'},
            'mettur_adv': { name: 'Mettur Dam', river: 'Kaveri', info: 'Located in Tamil Nadu, it is one of the largest dams in India and crucial for irrigation and hydropower for the state.' },
            'linganamakki': { name: 'Linganamakki Dam', river: 'Sharavathi', info: 'Located in Karnataka, this dam is a major source of hydroelectric power for the state.' },
            'indira_sagar_adv': { name: 'Indira Sagar Dam', river: 'Narmada', info: 'A key multi-purpose dam on the Narmada river in Madhya Pradesh, providing significant hydropower and irrigation benefits.' }
        };

        const advancedDamPositions = { // top, left, width, height percentages for masks
            'baglihar': { top: '13%', left: '18%', width: '8%', height: '2.5%'},
            'chamera': { top: '14%', left: '30%', width: '10%', height: '2.5%'},
            'tehri_adv': { top: '22%', left: '39%', width: '8%', height: '2.5%'},
            'sardar_sarovar_adv': { top: '48%', left: '9.5%', width: '10%', height: '2.5%'},
            'ukai': { top: '53.5%', left: '30%', width: '5%', height: '2.5%'},
            'koyna_adv': { top: '60%', left: '20%', width: '8%', height: '2.5%'},
            'srisailam': { top: '65%', left: '40%', width: '7%', height: '2.5%'},
            'nagarjuna_sagar_adv': { top: '62%', left: '32%', width: '11%', height: '2.5%'},
            'hirakud_adv': { top: '49%', left: '56%', width: '7%', height: '2.5%'},
            'maithon_adv': { top: '42%', left: '63%', width: '8%', height: '2.5%'},
            'rihand_adv': { top: '40%', left: '40%', width: '12%', height: '2.5%'},
            'idukki': { top: '88%', left: '30%', width: '6%', height: '2.5%'},
            'mettur_adv': { top: '79%', left: '35%', width: '8%', height: '2.5%'},
            'linganamakki': { top: '73%', left: '34%', width: '9%', height: '2.5%'},
            'indira_sagar_adv': { top: '46%', left: '32%', width: '12%', height: '2.5%'}
        };

        const quizQuestions = [
            { question: "Which of the following is NOT a cause of water scarcity?", options: ["Growing population", "Industrialization", "Rooftop rainwater harvesting", "Water pollution"], answer: "Rooftop rainwater harvesting" }, { question: "The Hirakud Dam is built on which river?", options: ["Ganga", "Narmada", "Mahanadi", "Krishna"], answer: "Mahanadi" }, { question: "Which of these is a traditional rainwater harvesting technique used in Rajasthan?", options: ["Guls or Kuls", "Bamboo Drip Irrigation", "Tankas", "Inundation Channels"], answer: "Tankas" }, { question: "Which statement is an argument AGAINST multi-purpose river projects?", options: ["They generate electricity for our industries.", "They lead to large scale displacement and loss of livelihood.", "They bring water to areas that suffer from water scarcity.", "They help to control floods by regulating water flow."], answer: "They lead to large scale displacement and loss of livelihood." }
        ];

        // --- INITIALIZATION ---
        window.addEventListener('DOMContentLoaded', () => {
            setupMap('map-container', damPositions, damData, 'dam');
            setupMap('river-map-container', riverPositions, riverData, 'river');
            setupMap('advanced-map-container', advancedDamPositions, advancedDamData, 'advanced-dam');
            loadQuiz();
        });

        // --- MODAL LOGIC ---
        const modal = document.getElementById('info-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const closeModalBtn = document.getElementById('close-modal-btn');

        closeModalBtn.addEventListener('click', () => modal.classList.add('hidden'));
        modal.addEventListener('click', (e) => {
            if (e.target === modal) modal.classList.add('hidden');
        });

        function showModal(data, type) {
            modalTitle.textContent = data.name;
            if (type === 'dam' || type === 'advanced-dam') {
                modalBody.innerHTML = `
                    <p class="text-lg mb-2"><strong class="font-semibold text-black-700">River:</strong> ${data.river}</p>
                    <p class="text-black-600 mb-4">${data.info}</p>
                    <div class="mt-4 p-4 bg-green-50 border-l-4 border-green-400 rounded"><h4 class="font-bold text-green-800">Primary Benefits</h4><p class="text-green-700">Multi-purpose projects like this one are crucial for irrigation, hydropower generation, flood control, and providing water for domestic and industrial use.</p></div>
                    <div class="mt-4 p-4 bg-red-50 border-l-4 border-red-400 rounded"><h4 class="font-bold text-red-800">Common Criticisms</h4><p class="text-red-700">Large dams often face criticism for affecting the natural flow of rivers, causing sedimentation, harming aquatic life, and displacing local populations.</p></div>
                `;
            } else if (type === 'river') {
                modalBody.innerHTML = `
                    <p class="text-gray-600 mb-4">${data.info}</p>
                    <div class="mt-4 p-4 bg-blue-50 border-l-4 border-blue-400 rounded"><h4 class="font-bold text-blue-800">Significance</h4><p class="text-blue-700">River systems form the backbone of India's agriculture, culture, and economy, supporting millions of people and diverse ecosystems.</p></div>
                `;
            }
            modal.classList.remove('hidden');
        }

        // --- MAP LOGIC ---
        function setupMap(containerId, positions, data, type) {
            const mapContainer = document.getElementById(containerId);
            if (!mapContainer) return;

            Object.keys(positions).forEach(key => {
                const pos = positions[key];
                const marker = document.createElement('div');
                
                if (type === 'advanced-dam') {
                    marker.className = 'marker dam-mask';
                    marker.style.width = pos.width;
                    marker.style.height = pos.height;
                } else {
                    marker.className = `marker ${type}-marker`;
                }
                
                marker.style.top = pos.top;
                marker.style.left = pos.left;
                
                const tooltip = document.createElement('span');
                tooltip.className = 'tooltip';
                tooltip.textContent = data[key].name;
                marker.appendChild(tooltip);
                mapContainer.appendChild(marker);

                marker.addEventListener('click', () => {
                    const itemInfo = data[key];
                    showModal(itemInfo, type);
                });
            });
        }

        // --- QUIZ LOGIC ---
        const quizContainer = document.getElementById('quiz-container');
        const quizResult = document.getElementById('quiz-result');
        const resultText = document.getElementById('result-text');
        const restartQuizBtn = document.getElementById('restart-quiz-btn');
        let currentQuestionIndex = 0;
        let score = 0;

        function loadQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            quizResult.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            quizContainer.innerHTML = `
                <h3 class="text-xl font-semibold mb-4">${currentQuestionIndex + 1}. ${question.question}</h3>
                <div class="space-y-3">
                    ${question.options.map(option => `<button class="quiz-option w-full text-left p-3 bg-gray-100 rounded-lg border-2 border-transparent hover:bg-gray-200 transition">${option}</button>`).join('')}
                </div>`;
            quizContainer.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', selectAnswer);
            });
        }

        function selectAnswer(e) {
            const selectedButton = e.target;
            const selectedAnswer = selectedButton.textContent.trim();
            const correctAnswer = quizQuestions[currentQuestionIndex].answer;
            
            quizContainer.querySelectorAll('.quiz-option').forEach(opt => {
                opt.disabled = true;
                if (opt.textContent.trim() === correctAnswer) opt.classList.add('correct');
            });

            if (selectedAnswer === correctAnswer) {
                score++;
            } else {
                selectedButton.classList.add('incorrect');
            }

            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizQuestions.length) {
                    showQuestion();
                } else {
                    showResult();
                }
            }, 1500);
        }

        function showResult() {
            quizContainer.classList.add('hidden');
            quizResult.classList.remove('hidden');
            resultText.textContent = `You scored ${score} out of ${quizQuestions.length}!`;
        }

        restartQuizBtn.addEventListener('click', loadQuiz);
    </script>
</body>
</html>
